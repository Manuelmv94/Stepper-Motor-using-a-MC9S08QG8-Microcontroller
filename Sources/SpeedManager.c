/*! **********************************************************************************************
* 2016  ITESM Campus Guadalajara. Laboratorio de Microcontroladores 
*  
*
* @file:      SpeedManager.c
* @author(s): Manuel Madrigal Valenzuela; Efraín Duarte López
*
* @brief (Theory of Operation)
*     The driver holds the time delay between steps of a stepper motor.
*     The speed can be set in RPS and consulted as the time delay needed between steps to accomplish
*     the desired speed.
*
**************************************************************************************************/


/*************************************************************************************************/
/*********************						Includes						**********************/
/*************************************************************************************************/
#include "SpeedManager.h"
/*************************************************************************************************/
/*********************						Defines							**********************/
/*************************************************************************************************/
/* The user should NOT modify these values */
#define US_IN_1SECOND   1000000
#define SCALE  10
/*************************************************************************************************/
/*********************						Typedefs						**********************/
/*************************************************************************************************/

/*************************************************************************************************/
/*********************					Function Prototypes					**********************/
/*************************************************************************************************/

/*************************************************************************************************/
/*********************                  Static Variables                    **********************/
/*************************************************************************************************/
static u32 u32MotorSpeedDelay;
/*************************************************************************************************/
/*********************					Global Variables					**********************/
/*************************************************************************************************/

/*************************************************************************************************/
/*********************                  Static Constants                    **********************/
/*************************************************************************************************/


/*************************************************************************************************/
/*********************                  Global Constants                    **********************/
/*************************************************************************************************/

/*************************************************************************************************/
/*********************				   Exported Functions					**********************/
/*************************************************************************************************/

void SpeedManager_Init(void)
{
u32MotorSpeedDelay=INITIAL_SPEED_DELAY_US;
}

u32 SpeedManager_getSpeedDelay(void)
{
   return u32MotorSpeedDelay;
}

void SpeedManager_setSpeed(u16 RPS)
{
   u32MotorSpeedDelay=(US_IN_1SECOND*SCALE)/(NUMBER_OF_STEPS*(u32)RPS);     
}

//-------------------------------------------------------------------------------------------------


/*************************************************************************************************/
/*********************				    Private Functions					**********************/
/*************************************************************************************************/

